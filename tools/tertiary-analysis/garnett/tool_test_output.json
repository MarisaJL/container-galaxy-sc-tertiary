{"tests": [{"data": {"status": "success", "tool_id": "garnett_check_markers", "time_seconds": 41.24877405166626, "inputs": {"cds_object": {"src": "hda", "id": "2891970512fa2d5a"}, "marker_file_path": {"src": "hda", "id": "5729865256bc2525"}}, "tool_version": "0.2.8+galaxy0", "job": {"stdout": "[1] \"plotting path /private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/3/0/e/dataset_30e0b45d-8712-4bcd-ac53-123d0ee3349d.dat\"\nnull device \n          1 \n", "job_stderr": "", "create_time": "2020-03-13T11:46:33.656708", "id": "54f2a3a23292eb07", "command_line": "garnett_check_markers.R --cds-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/2/8/d/dataset_28df5b47-ffc6-4bf7-80be-09e340220581.dat' --marker-file-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/b/c/2/dataset_bc28fcff-347f-419c-bfc8-70bf9dc6e86d.dat' --database 'org.Hs.eg.db' --cds-gene-id-type 'ENSEMBL' --marker-file-gene-id-type 'ENSEMBL' --marker-output-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/1/5/9/dataset_1591930e-ab70-4656-8bb3-11ac92bb709a.dat' --plot-output-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/3/0/e/dataset_30e0b45d-8712-4bcd-ac53-123d0ee3349d.dat' --propogate-markers 'true' --classifier-gene-id-type 'ENSEMBL'", "exit_code": 0, "tool_stderr": "There are 10 cell type definitions\n", "tool_id": "garnett_check_markers", "params": {"cds_gene_id_type": "\"ENSEMBL\"", "database": "\"org.Hs.eg.db\"", "dbkey": "\"?\"", "marker_file_gene_id_type": "\"ENSEMBL\"", "propogate_markers": "\"true\"", "classifier_gene_id_type": "\"ENSEMBL\"", "chromInfo": "\"/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/galaxy-dev/tool-data/shared/ucsc/chrom/?.len\"", "__input_ext": "\"input\""}, "tool_stdout": "[1] \"plotting path /private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/3/0/e/dataset_30e0b45d-8712-4bcd-ac53-123d0ee3349d.dat\"\nnull device \n          1 \n", "job_messages": [], "inputs": {"cds_object": {"src": "hda", "id": "2891970512fa2d5a", "uuid": "28df5b47-ffc6-4bf7-80be-09e340220581"}, "marker_file_path": {"src": "hda", "id": "5729865256bc2525", "uuid": "bc28fcff-347f-419c-bfc8-70bf9dc6e86d"}}, "update_time": "2020-03-13T11:46:55.663252", "state": "ok", "outputs": {"marker_output_path": {"src": "hda", "id": "54f2a3a23292eb07", "uuid": "1591930e-ab70-4656-8bb3-11ac92bb709a"}, "plot_output_path": {"src": "hda", "id": "8155e4b4bf1581ff", "uuid": "30e0b45d-8712-4bcd-ac53-123d0ee3349d"}}, "history_id": "2891970512fa2d5a", "command_version": "", "job_metrics": [], "job_stdout": "", "galaxy_version": "20.01", "stderr": "There are 10 cell type definitions\n", "model_class": "Job", "external_id": "10374", "user_email": "test@bx.psu.edu"}, "test_index": 0}, "id": "functional.test_toolbox.TestForTool_garnett_check_markers.test_tool_000000", "has_data": true}, {"data": {"status": "success", "tool_id": "garnett_classify_cells", "time_seconds": 41.013139963150024, "inputs": {"cds_object": {"src": "hda", "id": "7b55dbb89df8f4e5"}, "classifier_object": {"src": "hda", "id": "fa6d20d0fb68383f"}}, "tool_version": "0.2.8+galaxy0", "job": {"stdout": "", "job_stderr": "", "create_time": "2020-03-13T11:47:14.992896", "id": "fa6d20d0fb68383f", "command_line": "garnett_classify_cells.R --cds-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/6/0/7/dataset_6072d6a0-5ad6-4cba-bf87-3e358fc37c74.dat' --classifier-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/9/7/4/dataset_974e42c2-244c-4ee8-83a6-6b2c7a1b814c.dat' --database 'org.Hs.eg.db' --cds-gene-id-type 'ENSEMBL' --cluster-extend 'true' --rank-prob-ratio '1.5' --cds-output-obj '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/7/7/4/dataset_774a056c-0a88-4032-a4b1-6820f7768b82.dat'", "exit_code": 0, "tool_stderr": "", "tool_id": "garnett_classify_cells", "params": {"cds_gene_id_type": "\"ENSEMBL\"", "rank_prob_ratio": "\"1.5\"", "database": "\"org.Hs.eg.db\"", "dbkey": "\"?\"", "cluster_extend": "\"true\"", "chromInfo": "\"/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/galaxy-dev/tool-data/shared/ucsc/chrom/?.len\"", "__input_ext": "\"input\""}, "tool_stdout": "", "job_messages": [], "inputs": {"cds_object": {"src": "hda", "id": "7b55dbb89df8f4e5", "uuid": "6072d6a0-5ad6-4cba-bf87-3e358fc37c74"}, "classifier_object": {"src": "hda", "id": "fa6d20d0fb68383f", "uuid": "974e42c2-244c-4ee8-83a6-6b2c7a1b814c"}}, "update_time": "2020-03-13T11:47:34.825805", "state": "ok", "outputs": {"cds_output_obj": {"src": "hda", "id": "683bc220e21425bb", "uuid": "774a056c-0a88-4032-a4b1-6820f7768b82"}}, "history_id": "5729865256bc2525", "command_version": "", "job_metrics": [], "job_stdout": "", "galaxy_version": "20.01", "stderr": "", "model_class": "Job", "external_id": "13265", "user_email": "test@bx.psu.edu"}, "test_index": 0}, "id": "functional.test_toolbox.TestForTool_garnett_classify_cells.test_tool_000000", "has_data": true}, {"data": {"status": "success", "tool_id": "garnett_get_std_output", "time_seconds": 33.64644002914429, "inputs": {"input_object": {"src": "hda", "id": "a90a30fafe298e1e"}}, "tool_version": "0.2.8+galaxy0", "job": {"stdout": "no index column provided; use row names\n", "job_stderr": "", "create_time": "2020-03-13T11:47:48.927705", "id": "a90a30fafe298e1e", "command_line": "garnett_get_std_output.R --input-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/a/8/c/dataset_a8c585c2-8560-45ac-99b6-280f6a44203e.dat' --output-file-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/7/6/1/dataset_76194da1-36c9-4551-8545-1aac3096b281.dat'", "exit_code": 0, "tool_stderr": "", "tool_id": "garnett_get_std_output", "params": {"chromInfo": "\"/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/galaxy-dev/tool-data/shared/ucsc/chrom/?.len\"", "__input_ext": "\"input\"", "dbkey": "\"?\""}, "tool_stdout": "no index column provided; use row names\n", "job_messages": [], "inputs": {"input_object": {"src": "hda", "id": "a90a30fafe298e1e", "uuid": "a8c585c2-8560-45ac-99b6-280f6a44203e"}}, "update_time": "2020-03-13T11:48:06.100093", "state": "ok", "outputs": {"output_file_path": {"src": "hda", "id": "b842d972534ccb3e", "uuid": "76194da1-36c9-4551-8545-1aac3096b281"}}, "history_id": "54f2a3a23292eb07", "command_version": "", "job_metrics": [], "job_stdout": "", "galaxy_version": "20.01", "stderr": "", "model_class": "Job", "external_id": "16129", "user_email": "test@bx.psu.edu"}, "test_index": 0}, "id": "functional.test_toolbox.TestForTool_garnett_get_std_output.test_tool_000000", "has_data": true}, {"data": {"status": "failure", "tool_id": "garnett_train_classifier", "time_seconds": 117.91416096687317, "inputs": {"cds_object": {"src": "hda", "id": "5449172d6ff5669b"}, "marker_file_path": {"src": "hda", "id": "9ce08b2254e4d5ed"}}, "tool_version": "0.2.8+galaxy0", "output_problems": ["History item  different than expected, difference (using diff):\n( /var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpkQunV2trained_classifier.rds v. /var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpWawfq8trained_classifier.rds )\nBinary data detected, not displaying diff"], "job": {"stdout": "training_sample\n      1       2       3       4       5       7 Unknown \n      2       2       2       2      13      19      77 \n", "job_stderr": "", "create_time": "2020-03-13T11:48:29.892827", "id": "9ce08b2254e4d5ed", "command_line": "garnett_train_classifier.R --cds-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/1/b/c/dataset_1bc0faf1-0720-49e1-8bba-1157f28d8366.dat' --marker-file-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/f/4/8/dataset_f48b927d-fdcc-4bd9-abb8-7776716b8c0f.dat' --database 'org.Hs.eg.db' --cds-gene-id-type 'ENSEMBL' --marker-file-gene-id-type 'ENSEMBL' --num-unknown '500' --min-observations '8' --max-training-samples '500' --propogate-markers 'true' --cores '1' --classifier-gene-id-type 'ENSEMBL' --output-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/d/8/8/dataset_d882d5de-bc19-4468-872e-50d8cc292a8c.dat'", "exit_code": 0, "tool_stderr": "There are 10 cell type definitions\nWarning in (function (A, nv = 5, nu = nv, maxit = 1000, work = nv + 7, reorth = TRUE,  :\n  You're computing too large a percentage of total singular values, use a standard svd instead.\nThe following cell types do not have enough training cells and will be dropped:  1 2 3 4\nModel training finished.\n", "tool_id": "garnett_train_classifier", "params": {"num_unknown": "\"500\"", "cds_gene_id_type": "\"ENSEMBL\"", "database": "\"org.Hs.eg.db\"", "dbkey": "\"?\"", "marker_file_gene_id_type": "\"ENSEMBL\"", "propogate_markers": "\"true\"", "cores": "\"1\"", "classifier_gene_id_type": "\"ENSEMBL\"", "min_observations": "\"8\"", "max_training_samples": "\"500\"", "chromInfo": "\"/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/galaxy-dev/tool-data/shared/ucsc/chrom/?.len\"", "__input_ext": "\"input\""}, "tool_stdout": "training_sample\n      1       2       3       4       5       7 Unknown \n      2       2       2       2      13      19      77 \n", "job_messages": [], "inputs": {"cds_object": {"src": "hda", "id": "5449172d6ff5669b", "uuid": "1bc0faf1-0720-49e1-8bba-1157f28d8366"}, "marker_file_path": {"src": "hda", "id": "9ce08b2254e4d5ed", "uuid": "f48b927d-fdcc-4bd9-abb8-7776716b8c0f"}}, "update_time": "2020-03-13T11:50:06.919205", "state": "ok", "outputs": {"output_classifier_path": {"src": "hda", "id": "80b8022ff3f677b7", "uuid": "d882d5de-bc19-4468-872e-50d8cc292a8c"}}, "history_id": "8155e4b4bf1581ff", "command_version": "", "job_metrics": [], "job_stdout": "", "galaxy_version": "20.01", "stderr": "There are 10 cell type definitions\nWarning in (function (A, nv = 5, nu = nv, maxit = 1000, work = nv + 7, reorth = TRUE,  :\n  You're computing too large a percentage of total singular values, use a standard svd instead.\nThe following cell types do not have enough training cells and will be dropped:  1 2 3 4\nModel training finished.\n", "model_class": "Job", "external_id": "19023", "user_email": "test@bx.psu.edu"}, "test_index": 0, "problem_type": "galaxy.tool_util.verify.interactor.JobOutputsError", "problem_log": "Traceback (most recent call last):\n  File \"/Users/a_solovyev/miniconda3/envs/planemo/lib/python2.7/unittest/case.py\", line 329, in run\n    testMethod()\n  File \"/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/galaxy-dev/test/functional/test_toolbox.py\", line 99, in test_tool\n    self.do_it(tool_version=tool_version, test_index=test_index)\n  File \"/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/galaxy-dev/test/functional/test_toolbox.py\", line 36, in do_it\n    verify_tool(tool_id, self.galaxy_interactor, resource_parameters=resource_parameters, test_index=test_index, tool_version=tool_version, register_job_data=register_job_data)\n  File \"/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/galaxy-dev/lib/galaxy/tool_util/verify/interactor.py\", line 789, in verify_tool\n    raise e\nJobOutputsError: History item  different than expected, difference (using diff):\n( /var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpkQunV2trained_classifier.rds v. /var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpWawfq8trained_classifier.rds )\nBinary data detected, not displaying diff\n"}, "id": "functional.test_toolbox.TestForTool_garnett_train_classifier.test_tool_000000", "has_data": true}, {"data": {"status": "success", "tool_id": "garnett_transform_markers", "time_seconds": 28.020123958587646, "inputs": {"marker_list": {"src": "hda", "id": "1ae74d26531588b0"}, "input_marker_file": {"src": "hda", "id": "b54fb481e575bccc"}}, "tool_version": "0.2.8+galaxy0", "job": {"stdout": "[1] TRUE\n", "job_stderr": "", "create_time": "2020-03-13T11:50:27.719018", "id": "1ae74d26531588b0", "command_line": "transform_marker_file.R --input-marker-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/2/f/1/dataset_2f136bc2-a624-4b1f-987a-815ed6da4f3c.dat' --marker-list '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/9/e/2/dataset_9e29886b-86e1-48c1-a256-56fc4296fa61.dat' --pval-col 'pvals' --pval-threshold '0.05' --groups-col 'groups' --gene-names 'names' --garnett-marker-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/1/c/5/dataset_1c5b885b-c965-4581-91d3-64d5a93c7126.dat'", "exit_code": 0, "tool_stderr": "", "tool_id": "garnett_transform_markers", "params": {"chromInfo": "\"/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/galaxy-dev/tool-data/shared/ucsc/chrom/?.len\"", "dbkey": "\"?\"", "pval_col": "\"pvals\"", "groups_col": "\"groups\"", "gene_names": "\"names\"", "__input_ext": "\"input\"", "pval_threshold": "\"0.05\""}, "tool_stdout": "[1] TRUE\n", "job_messages": [], "inputs": {"marker_list": {"src": "hda", "id": "1ae74d26531588b0", "uuid": "9e29886b-86e1-48c1-a256-56fc4296fa61"}, "input_marker_file": {"src": "hda", "id": "b54fb481e575bccc", "uuid": "2f136bc2-a624-4b1f-987a-815ed6da4f3c"}}, "update_time": "2020-03-13T11:50:39.652195", "state": "ok", "outputs": {"garnett_marker_file": {"src": "hda", "id": "440a6c2b5d9efe20", "uuid": "1c5b885b-c965-4581-91d3-64d5a93c7126"}}, "history_id": "7b55dbb89df8f4e5", "command_version": "", "job_metrics": [], "job_stdout": "", "galaxy_version": "20.01", "stderr": "", "model_class": "Job", "external_id": "21911", "user_email": "test@bx.psu.edu"}, "test_index": 0}, "id": "functional.test_toolbox.TestForTool_garnett_transform_markers.test_tool_000000", "has_data": true}, {"data": {"status": "success", "tool_id": "update_marker_file", "time_seconds": 27.38868498802185, "inputs": {"marker_list_obj": {"src": "hda", "id": "ea0b941dfbe636f8"}, "marker_check_file": {"src": "hda", "id": "27ee89e2e3d631e0"}}, "tool_version": "0.2.8+galaxy0", "job": {"stdout": "[1] TRUE\n", "job_stderr": "", "create_time": "2020-03-13T11:50:55.279118", "id": "27ee89e2e3d631e0", "command_line": "update_marker_file.R --marker-list-obj '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/4/1/7/dataset_4178adad-aa0d-43c3-8bcb-ebb60cbfa8ad.dat' --marker-check-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/1/1/f/dataset_11f89b32-3ec7-455b-a4a2-5f50158bf58d.dat' --summary-col 'summary' --cell-type-col 'cell_type' --gene-id-col 'gene_id' --updated-marker-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/files/5/2/5/dataset_525681ac-599b-4092-8e1f-e4b64f19c62b.dat'", "exit_code": 0, "tool_stderr": "", "tool_id": "update_marker_file", "params": {"summary_col": "\"summary\"", "gene_id_col": "\"gene_id\"", "cell_type_col": "\"cell_type\"", "dbkey": "\"?\"", "chromInfo": "\"/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmp_9gbhqll/galaxy-dev/tool-data/shared/ucsc/chrom/?.len\"", "__input_ext": "\"input\""}, "tool_stdout": "[1] TRUE\n", "job_messages": [], "inputs": {"marker_list_obj": {"src": "hda", "id": "ea0b941dfbe636f8", "uuid": "4178adad-aa0d-43c3-8bcb-ebb60cbfa8ad"}, "marker_check_file": {"src": "hda", "id": "27ee89e2e3d631e0", "uuid": "11f89b32-3ec7-455b-a4a2-5f50158bf58d"}}, "update_time": "2020-03-13T11:51:07.282267", "state": "ok", "outputs": {"updated_marker_file": {"src": "hda", "id": "61f03d5eef6f1538", "uuid": "525681ac-599b-4092-8e1f-e4b64f19c62b"}}, "history_id": "fa6d20d0fb68383f", "command_version": "", "job_metrics": [], "job_stdout": "", "galaxy_version": "20.01", "stderr": "", "model_class": "Job", "external_id": "24893", "user_email": "test@bx.psu.edu"}, "test_index": 0}, "id": "functional.test_toolbox.TestForTool_update_marker_file.test_tool_000000", "has_data": true}], "version": "0.1", "summary": {"num_tests": 6, "num_failures": 1, "num_errors": 0, "num_skips": 0}, "exit_code": 1}