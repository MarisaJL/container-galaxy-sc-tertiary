{"tests": [{"data": {"inputs": {"cds_object": {"src": "hda", "id": "2891970512fa2d5a"}, "marker_file_path": {"src": "hda", "id": "5729865256bc2525"}}, "job": {"inputs": {"cds_object": {"src": "hda", "id": "2891970512fa2d5a", "uuid": "5a81c0f8-78d7-4beb-acd5-56bd969f1979"}, "marker_file_path": {"src": "hda", "id": "5729865256bc2525", "uuid": "a50ca96b-b6e6-437b-965c-29b6d031e836"}}, "update_time": "2020-04-02T14:28:16.900240", "stdout": "[1] \"plotting path /private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_4.dat\"\nnull device \n          1 \n", "outputs": {"marker_output_path": {"src": "hda", "id": "54f2a3a23292eb07", "uuid": "aaba71a0-e7b7-4697-9fe2-135d1759c849"}, "plot_output_path": {"src": "hda", "id": "8155e4b4bf1581ff", "uuid": "e19b0c6d-52f3-47e3-b30f-5d00036d1bf6"}}, "tool_id": "garnett_check_markers", "command_line": "garnett_check_markers.R --cds-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_1.dat' --marker-file-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_2.dat' --database 'org.Hs.eg.db' --cds-gene-id-type 'ENSEMBL' --marker-file-gene-id-type 'ENSEMBL' --marker-output-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_3.dat' --plot-output-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_4.dat' --propogate-markers 'true' --classifier-gene-id-type 'ENSEMBL'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T14:22:25.843017", "params": {"cds_gene_id_type": "\"ENSEMBL\"", "database": "\"org.Hs.eg.db\"", "dbkey": "\"hg17\"", "marker_file_gene_id_type": "\"ENSEMBL\"", "propogate_markers": "\"true\"", "classifier_gene_id_type": "\"ENSEMBL\"", "chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\""}, "stderr": "There are 10 cell type definitions\n", "job_metrics": [], "model_class": "Job", "external_id": "94763", "id": "54f2a3a23292eb07", "user_email": "test@bx.psu.edu"}, "status": "success"}, "id": "functional.test_toolbox.TestForTool_garnett_check_markers.test_tool_000000", "has_data": true}, {"data": {"inputs": {"cds_object": {"src": "hda", "id": "7b55dbb89df8f4e5"}, "classifier_object": {"src": "hda", "id": "fa6d20d0fb68383f"}}, "job": {"inputs": {"cds_object": {"src": "hda", "id": "7b55dbb89df8f4e5", "uuid": "96aa5eb4-20b7-45dd-ab15-eae2b4819c1a"}, "classifier_object": {"src": "hda", "id": "fa6d20d0fb68383f", "uuid": "b681f372-b0a5-4373-ac7c-61d5466bead2"}}, "update_time": "2020-04-02T14:29:48.435925", "stdout": "", "outputs": {"cds_output_obj": {"src": "hda", "id": "683bc220e21425bb", "uuid": "12cecbcb-ec39-4f7b-90ca-425c1582a456"}}, "tool_id": "garnett_classify_cells", "command_line": "garnett_classify_cells.R --cds-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_5.dat' --classifier-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_6.dat' --database 'org.Hs.eg.db' --cds-gene-id-type 'ENSEMBL' --cluster-extend 'true' --rank-prob-ratio '1.5' --cds-output-obj '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_7.dat'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T14:29:27.249133", "params": {"cds_gene_id_type": "\"ENSEMBL\"", "database": "\"org.Hs.eg.db\"", "dbkey": "\"hg17\"", "rank_prob_ratio": "\"1.5\"", "cluster_extend": "\"true\"", "chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\""}, "stderr": "", "job_metrics": [], "model_class": "Job", "external_id": "97483", "id": "fa6d20d0fb68383f", "user_email": "test@bx.psu.edu"}, "status": "success"}, "id": "functional.test_toolbox.TestForTool_garnett_classify_cells.test_tool_000000", "has_data": true}, {"data": {"inputs": {"input_object": {"src": "hda", "id": "a90a30fafe298e1e"}}, "job": {"inputs": {"input_object": {"src": "hda", "id": "a90a30fafe298e1e", "uuid": "b6146b6d-a88a-4243-a84c-a68e22e0b3e1"}}, "update_time": "2020-04-02T14:30:14.843367", "stdout": "no index column provided; use row names\n", "outputs": {"output_file_path": {"src": "hda", "id": "b842d972534ccb3e", "uuid": "e746e787-4910-4d83-ab18-42406b38e44a"}}, "tool_id": "garnett_get_std_output", "command_line": "garnett_get_std_output.R --input-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_8.dat' --output-file-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_9.dat'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T14:29:58.820901", "params": {"chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\"", "dbkey": "\"hg17\""}, "stderr": "", "job_metrics": [], "model_class": "Job", "external_id": "310", "id": "a90a30fafe298e1e", "user_email": "test@bx.psu.edu"}, "status": "success"}, "id": "functional.test_toolbox.TestForTool_garnett_get_std_output.test_tool_000000", "has_data": true}, {"data": {"inputs": {"cds_object": {"src": "hda", "id": "5449172d6ff5669b"}, "marker_file_path": {"src": "hda", "id": "9ce08b2254e4d5ed"}}, "job": {"inputs": {"cds_object": {"src": "hda", "id": "5449172d6ff5669b", "uuid": "6d5c9f77-8d5d-4de0-9687-5b8c6302ca8b"}, "marker_file_path": {"src": "hda", "id": "9ce08b2254e4d5ed", "uuid": "f4d2c5df-d9ab-4a8f-9c57-d619e42e1263"}}, "update_time": "2020-04-02T14:32:08.176160", "stdout": "training_sample\n      1       2       3       4       5       7 Unknown \n      2       2       2       2      13      19      77 \n", "outputs": {"output_classifier_path": {"src": "hda", "id": "80b8022ff3f677b7", "uuid": "59f31bd8-1bef-4961-bac6-954223da9493"}}, "tool_id": "garnett_train_classifier", "command_line": "garnett_train_classifier.R --cds-object '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_10.dat' --marker-file-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_11.dat' --database 'org.Hs.eg.db' --cds-gene-id-type 'ENSEMBL' --marker-file-gene-id-type 'ENSEMBL' --num-unknown '500' --min-observations '8' --max-training-samples '500' --propogate-markers 'true' --cores '1' --classifier-gene-id-type 'ENSEMBL' --output-path '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_12.dat'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T14:30:34.802706", "params": {"num_unknown": "\"500\"", "cds_gene_id_type": "\"ENSEMBL\"", "database": "\"org.Hs.eg.db\"", "dbkey": "\"hg17\"", "marker_file_gene_id_type": "\"ENSEMBL\"", "propogate_markers": "\"true\"", "cores": "\"1\"", "classifier_gene_id_type": "\"ENSEMBL\"", "min_observations": "\"8\"", "max_training_samples": "\"500\"", "chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\""}, "stderr": "There are 10 cell type definitions\nWarning in (function (A, nv = 5, nu = nv, maxit = 1000, work = nv + 7, reorth = TRUE,  :\n  You're computing too large a percentage of total singular values, use a standard svd instead.\nThe following cell types do not have enough training cells and will be dropped:  1 2 3 4\nModel training finished.\n", "job_metrics": [], "model_class": "Job", "external_id": "3094", "id": "9ce08b2254e4d5ed", "user_email": "test@bx.psu.edu"}, "output_problems": ["History item  different than expected, difference (using diff):\n( /Users/a_solovyev/dev/container-galaxy-sc-tertiary/tools/tertiary-analysis/garnett/test_dir/trained_classifier.rds v. /var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpONmRCHtrained_classifier.rds )\nBinary data detected, not displaying diff"], "problem_type": "functional.test_toolbox.JobOutputsError", "problem_log": "Traceback (most recent call last):\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py\", line 331, in run\n    testMethod()\n  File \"/Users/a_solovyev/galaxy_18.01/test/functional/test_toolbox.py\", line 316, in test_tool\n    self.do_it(td)\n  File \"/Users/a_solovyev/galaxy_18.01/test/functional/test_toolbox.py\", line 82, in do_it\n    raise e\nJobOutputsError: History item  different than expected, difference (using diff):\n( /Users/a_solovyev/dev/container-galaxy-sc-tertiary/tools/tertiary-analysis/garnett/test_dir/trained_classifier.rds v. /var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpONmRCHtrained_classifier.rds )\nBinary data detected, not displaying diff\n", "status": "failure"}, "id": "functional.test_toolbox.TestForTool_garnett_train_classifier.test_tool_000000", "has_data": true}, {"data": {"inputs": {"marker_list": {"src": "hda", "id": "1ae74d26531588b0"}, "input_marker_file": {"src": "hda", "id": "b54fb481e575bccc"}}, "job": {"inputs": {"marker_list": {"src": "hda", "id": "1ae74d26531588b0", "uuid": "a2daa832-0113-4996-966f-efcd6007c73e"}, "input_marker_file": {"src": "hda", "id": "b54fb481e575bccc", "uuid": "7065961e-4a29-4f3b-b157-27f8c9bcc9a1"}}, "update_time": "2020-04-02T14:32:38.498066", "stdout": "[1] TRUE\n", "outputs": {"garnett_marker_file": {"src": "hda", "id": "440a6c2b5d9efe20", "uuid": "1a871325-8c94-429c-8da2-8524123306bc"}}, "tool_id": "garnett_transform_markers", "command_line": "transform_marker_file.R --input-marker-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_13.dat' --marker-list '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_14.dat' --pval-col 'pvals' --pval-threshold '0.05' --groups-col 'groups' --gene-names 'names' --garnett-marker-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_15.dat'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T14:32:27.362049", "params": {"chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\"", "dbkey": "\"hg17\"", "pval_col": "\"pvals\"", "groups_col": "\"groups\"", "gene_names": "\"names\"", "pval_threshold": "\"0.05\""}, "stderr": "", "job_metrics": [], "model_class": "Job", "external_id": "5947", "id": "1ae74d26531588b0", "user_email": "test@bx.psu.edu"}, "status": "success"}, "id": "functional.test_toolbox.TestForTool_garnett_transform_markers.test_tool_000000", "has_data": true}, {"data": {"inputs": {"marker_list_obj": {"src": "hda", "id": "ea0b941dfbe636f8"}, "marker_check_file": {"src": "hda", "id": "27ee89e2e3d631e0"}}, "job": {"inputs": {"marker_list_obj": {"src": "hda", "id": "ea0b941dfbe636f8", "uuid": "e21411dd-de20-4e91-ba80-c8a733caa641"}, "marker_check_file": {"src": "hda", "id": "27ee89e2e3d631e0", "uuid": "dbe75476-f091-4cfc-ac92-b2c9ada7c89e"}}, "update_time": "2020-04-02T14:32:59.104642", "stdout": "[1] TRUE\n", "outputs": {"updated_marker_file": {"src": "hda", "id": "61f03d5eef6f1538", "uuid": "2eb80974-e89c-4246-a613-2e022141edd5"}}, "tool_id": "update_marker_file", "command_line": "update_marker_file.R --marker-list-obj '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_16.dat' --marker-check-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_17.dat' --summary-col 'summary' --cell-type-col 'cell_type' --gene-id-col 'gene_id' --updated-marker-file '/private/var/folders/r2/1kllr14j727gd63wnh8_2gm5086_fg/T/tmpv4ntjwkl/files/000/dataset_18.dat'", "exit_code": 0, "state": "ok", "create_time": "2020-04-02T14:32:49.038671", "params": {"summary_col": "\"summary\"", "gene_id_col": "\"gene_id\"", "chromInfo": "\"/Users/a_solovyev/galaxy_18.01/tool-data/shared/ucsc/chrom/hg17.len\"", "cell_type_col": "\"cell_type\"", "dbkey": "\"hg17\""}, "stderr": "", "job_metrics": [], "model_class": "Job", "external_id": "8634", "id": "27ee89e2e3d631e0", "user_email": "test@bx.psu.edu"}, "status": "success"}, "id": "functional.test_toolbox.TestForTool_update_marker_file.test_tool_000000", "has_data": true}], "version": "0.1", "summary": {"num_tests": 6, "num_failures": 1, "num_errors": 0, "num_skips": 0}, "exit_code": 1}